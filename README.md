GoodMarket - GoodDollar Analytics Platform Overview GoodMarket is a Web3 earning platform built on the GoodDollar ecosystem that enables users to earn G$ tokens through various activities including educational quizzes, social media tasks, minigames, and community engagement. The platform integrates with the Celo blockchain for token disbursements and uses Supabase for persistent data storage.

Core Purpose: Provide accessible cryptocurrency earning opportunities through education, tasks, and games while promoting the GoodDollar universal basic income initiative.

User Preferences Preferred communication style: Simple, everyday language.

System Architecture Backend Framework Flask serves as the main web framework with Blueprint-based modular routing Each feature module (learn_and_earn, minigames, twitter_task, etc.) has its own Blueprint for clean separation Session-based authentication with UBI claim verification as the primary auth mechanism Blockchain Integration Web3.py connects to the Celo network (Chain ID 42220) via Forno RPC GoodDollar (G$) ERC-20 token transfers use direct private key signing Multiple wallet keys for different features: LEARN_WALLET_PRIVATE_KEY, TASK_KEY, GAMES_KEY, COMMUNITY_KEY Each module has its own blockchain service class handling disbursements Database Layer Supabase (PostgreSQL) for all persistent storage including user data, quiz settings, game states, and analytics Safe operation wrappers with retry logic for connection resilience TTL caching (cache_utils.py) reduces database load for frequently accessed data Module Structure Each earning feature follows a consistent pattern:

init.py - Module initialization and exports blockchain.py - Token disbursement logic routes.py or main service file - API endpoints and business logic Service class managing state and database operations Key Modules Learn & Earn - Quiz-based education with configurable rewards Minigames - Crash game with deposit/withdrawal system and Garden farming game Social Tasks - Twitter, Telegram, Facebook posting rewards Community Stories - Monthly submission window with screenshot verification News Feed - Content management for platform announcements Authentication Flow User provides wallet address (manual input OR WalletConnect QR code) System verifies recent UBI claim via blockchain event logs Session created with 24-hour validity tied to UBI claim freshness Auto-logout when UBI verification expires Wallet Connection (January 2026) Reown AppKit v1 integration with 300+ wallet support Uses official @reown/appkit-cdn@1.8.16 for WalletConnect protocol Supports: MetaMask, Trust Wallet, Rainbow, Coinbase Wallet, and 300+ more Key files: wallet_connect/init.py - Blueprint registration wallet_connect/routes.py - API endpoints for connect/disconnect static/wallet_connect.js - Reown AppKit loader with fallback modal Connection Flow: User clicks "Connect GoodDollar Wallet" → Loads Reown AppKit modal AppKit shows 300+ supported wallets (MetaMask, Trust, Rainbow, etc.) User connects via QR code or browser extension System verifies recent UBI claim via blockchain event logs If verified → Session created, redirect to Overview If not verified → Prompts user to claim UBI first Fallback: Manual wallet address input if AppKit fails to load UBI Verification: Checks for claims within last 24 hours on Celo network Environment: Requires WALLETCONNECT_PROJECT_ID secret from cloud.reown.com Frontend Server-rendered templates using Jinja2 Static JavaScript files for interactive features PWA-ready with manifest.json and service worker support Responsive design with CSS-in-template styling Admin System Admin wallet addresses stored in Supabase Maintenance mode toggles per feature Configurable reward amounts via reward_configuration table Admin dashboard for system management External Dependencies Blockchain Services Celo Network - Primary blockchain (RPC: forno.celo.org) GoodDollar Token Contract - 0x62B8B11039FcfE5aB0C56E502b1C372A3d2a9c7A UBI Proxy Contract - 0x43d72Ff17701B2DA814620735C39C620Ce0ea4A1 Database Supabase - PostgreSQL database for all application data Environment variables: SUPABASE_URL, SUPABASE_ANON_KEY Tables: quiz_settings, reward_configuration, maintenance_settings, garden_plots, etc. File Storage Replit Object Storage - Screenshot uploads for community stories ImgBB (fallback) - External image hosting API Third-Party APIs Social media verification (Twitter, Telegram, Facebook) for task completion No direct API integrations; uses manual screenshot verification Environment Variables Required CELO_RPC_URL - Blockchain RPC endpoint CHAIN_ID - Network chain ID (42220 for Celo mainnet) GOODDOLLAR_CONTRACT - G$ token address SUPABASE_URL, SUPABASE_ANON_KEY - Database credentials LEARN_WALLET_PRIVATE_KEY - Quiz reward disbursement key (also contract owner) LEARN_EARN_CONTRACT_ADDRESS - Deployed LearnAndEarnRewards contract address TASK_KEY - Social task reward disbursement key GAMES_KEY - Minigame reward disbursement key COMMUNITY_KEY - Community stories reward disbursement key MERCHANT_ADDRESS - Deposit receiving address for minigames

KarmaHQ Integration (January 2026) Project Profile: https://www.karmahq.xyz/project/goodmarket Metrics Tracked: - Unique Users: Tracked via RewardDisbursed events on LearnAndEarnRewards contract (0x52347653a24A9A1e432aEC6CD91a271158205963). - Social & Community Tasks: Verified via TASK_KEY (0x2D9644Fd40BABD64797884e0cb56F34cc063De71) and COMMUNITY_KEY wallet transactions (Direct G$ Token transfers). - Minigames & Rewards: Disbursements handled via GAMES_KEY wallet and LEARN_WALLET_PRIVATE_KEY (Contract Owner). - Identity Verification: Authenticated via UBI_PROXY (0x43d72Ff17701B2DA814620735C39C620Ce0ea4A1) event logs. Only users with a face-verified UBI claim within the last 24 hours are eligible. - Legacy Impact: 1,100+ transactions from the initial MVP phase. These are verifiable by auditing the TASK_KEY (Social Task wallet) and the admin wallet used for initial Learn & Earn disbursements on the Celo blockchain.

On-Chain Progress: 100+ unique rewards processed via the new smart contract.
Developer Activity: Linked via Replit/GitHub repo for "Git Commits" tracking.
Strategy: Hybrid tracking approach linking both the admin wallet (legacy) and the smart contract (current) to show full ecosystem impact.
Learn & Earn Smart Contract (January 2026) Contract: LearnAndEarnRewards.sol Custom smart contract deployed on Celo mainnet for managing G$ quiz rewards.

Deployed Contract: 0x52347653a24A9A1e432aEC6CD91a271158205963 Verified: Yes (Celoscan + Sourcify) Compiler: Solidity 0.8.21

Features:

Owner-controlled reward disbursements via smart contract Deposit and withdraw G$ tokens to/from contract Duplicate payout prevention (one reward per user per quiz) Batch disbursement for multiple recipients Pause/unpause functionality for emergencies Configurable min/max disbursement limits (1 G$ - 1000 G$) Secure error messages (no private key exposure) Key Files:

contracts/LearnAndEarnRewards.sol - Solidity smart contract source contracts/deploy_learn_earn_contract.py - Deployment script learn_and_earn/blockchain.py - Main disbursement service (uses smart contract) learn_and_earn/contract_service.py - Additional contract utilities Contract Functions:

deposit(amount) - Deposit G$ tokens into contract withdraw(amount) / withdrawAll() - Withdraw G$ (owner only) disburseReward(recipient, amount, quizId) - Send reward to user batchDisburseRewards(recipients[], amounts[], quizIds[]) - Batch rewards isQuizRewardClaimed(recipient, quizId) - Check if reward was claimed getContractStats() - Get balance/deposited/disbursed/withdrawn stats Usage:

First deposit G$ tokens to the contract Disbursements are made from the contract balance If balance is depleted, user sees "Rewards pool is currently depleted" (not private key error) Deployment:

python contracts/deploy_learn_earn_contract.py Discourse Forum Integration (January 2026) Overview Read-only integration with GoodDollar's Discourse forum (discourse.gooddollar.org) allowing users to view community discussions, governance proposals, and announcements directly within GoodMarket.

Key Files:

discourse_forum/init.py - Blueprint registration and module initialization discourse_forum/discourse_service.py - API service to fetch from Discourse discourse_forum/routes.py - API endpoints and page routes templates/community_forum.html - Forum display template Features:

View latest forum topics and discussions Browse governance proposals (GIPs) See community discussions and announcements Forum statistics (topics, posts, members) Category browsing with topic counts Direct links to Discourse for commenting/participating API Endpoints:

GET /forum/ - Community Forum page GET /forum/api/latest - Latest topics GET /forum/api/categories - Forum categories GET /forum/api/category/ - Topics in a category GET /forum/api/governance - Governance proposals GET /forum/api/community - Community discussions GET /forum/api/stats - Forum statistics Configuration:

DISCOURSE_URL - Optional environment variable to override the default Discourse URL (defaults to https://discourse.gooddollar.org) Caching:

API responses are cached for 5 minutes to reduce load on Discourse Forum stats cached for 10 minutes Uses existing cache_utils.py infrastructure Technical Details:

Server-side rendering with Jinja2 templates (no client-side API calls) Browser-like HTTP headers to bypass Cloudflare protection Publicly accessible page (no authentication required) Conditional navigation based on user login status
